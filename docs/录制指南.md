# 📹 用例录制指南（实习生版）

## 🎯 目标
将Web平台的操作步骤录制下来，生成自动化测试代码。

## 🛠️ 使用的工具
**Playwright Codegen** - 这是Playwright自带的录制工具，可以自动生成Python代码。

## 📋 操作步骤

### 第一步：打开录制工具

有两种方式打开录制工具：

#### 方式1：通过Web控制界面（推荐，已自动登录）⭐
1. 启动Web控制界面：运行 `python run.py`
2. 在浏览器中打开 `http://localhost:8080`
3. 找到"用例录制"面板
4. 在"目标URL"输入框中输入：`http://10.70.70.96/Shenyuan_9#/index`（桌面地址）
5. 点击"启动录制"按钮
6. **浏览器会自动登录并关闭弹窗，您可以直接开始录制操作！** ✨

#### 方式2：通过命令行（需要手动登录）
打开命令行（CMD或PowerShell），输入：
```bash
playwright codegen http://10.70.70.96/Shenyuan_9#/login
```
然后需要手动输入用户名和密码。

#### 方式3：使用自动登录脚本（推荐）⭐
打开命令行，输入：
```bash
python utils/recording_auto_login.py http://10.70.70.96/Shenyuan_9#/index
```
浏览器会自动登录并关闭弹窗，然后您可以直接开始录制操作。

### 第二步：执行操作
1. 录制工具会自动打开一个浏览器窗口
2. **如果使用方式1或方式3，浏览器已自动登录，您可以直接开始操作！**
3. **如果使用方式2，需要先登录**：
   - 输入用户名：`Shenyuan_9`
   - 输入密码：`Shenyuan_9`
   - 点击登录按钮
   - 关闭可能的弹窗（如"跳过了解"、"磁盘空间不足"等）
4. **在浏览器中正常操作**，就像平时使用Web平台一样：
   - 双击桌面上的应用图标（如"授课教学"）
   - 在应用中进行各种操作
5. **录制工具会自动记录你的每一步操作**

### 第三步：停止录制
1. 操作完成后，在录制工具的窗口中点击"停止录制"按钮（或关闭录制窗口）
2. 录制的代码会自动显示在录制工具中

### 第四步：保存代码
1. **复制所有生成的代码**（Ctrl+A全选，Ctrl+C复制）
2. 根据你要测试的应用模块，保存到对应的文件夹：

#### 📁 保存位置规则：
- **授课教学** → 保存到 `test_cases/teaching/` 文件夹
- **攻防演练** → 保存到 `test_cases/exercise/` 文件夹  
- **考试测评** → 保存到 `test_cases/exam/` 文件夹

#### 📝 文件命名规则：
- 文件名以 `test_` 开头
- 使用下划线连接，例如：`test_teaching_login.py`

#### 💡 示例：
如果要录制"授课教学"的登录和选择课程操作：
1. 文件名：`test_teaching_select_course.py`
2. 保存位置：`test_cases/teaching/test_teaching_select_course.py`

### 第五步：整理代码（可选）
录制的代码可能需要稍微调整，但基本可以直接使用。

## 📝 完整示例

### 示例1：录制登录操作

**操作步骤：**
1. 打开录制工具：`playwright codegen http://10.70.70.96/Shenyuan_9#/login`
2. 在浏览器中：
   - 输入用户名：`Shenyuan_9`
   - 输入密码：`Shenyuan_9`
   - 点击登录
3. 停止录制，复制代码
4. 创建文件：`test_cases/teaching/test_login.py`
5. 粘贴代码并保存

### 示例2：录制授课教学操作

**操作步骤：**
1. 打开录制工具：`playwright codegen http://10.70.70.96/Shenyuan_9#/login`
2. 在浏览器中：
   - 登录（用户名：`Shenyuan_9`，密码：`Shenyuan_9`）
   - 双击"授课教学"图标
   - 选择课程
   - 开始授课
3. 停止录制，复制代码
4. 创建文件：`test_cases/teaching/test_start_teaching.py`
5. 粘贴代码并保存

## ⚠️ 注意事项

1. **使用自动登录功能**：推荐使用方式1（Web控制界面）或方式3（自动登录脚本），可以自动登录并关闭弹窗，节省时间
2. **操作要完整**：录制时要完成完整的业务流程
3. **文件命名要规范**：使用 `test_` 开头，使用下划线
4. **保存到正确位置**：根据应用模块保存到对应的文件夹
5. **登录配置**：自动登录功能使用 `config/settings.yaml` 中的登录配置，确保配置正确

## ❓ 常见问题

### Q1: 录制工具打不开？
**A:** 确保已经安装了Playwright：
```bash
pip install playwright
playwright install
```

### Q2: 录制的代码在哪里？
**A:** 录制完成后，代码会显示在录制工具的窗口中，直接复制即可。

### Q3: 可以录制多个操作吗？
**A:** 可以！录制工具会记录你在浏览器中的所有操作。

### Q4: 录制的代码需要修改吗？
**A:** 大部分情况下可以直接使用，但可能需要：
- 调整等待时间
- 修改元素选择器（如果页面元素变化）
- 添加断言（验证操作结果）

### Q5: 如何测试录制的代码？
**A:** 保存代码后，在Web控制界面中选择对应的模块，点击"开始执行"即可。

## 📚 更多帮助

如果遇到问题，可以：
1. 查看项目根目录的 `README.md` 文件
2. 询问项目负责人
3. 查看Playwright官方文档：https://playwright.dev/python/

---

**记住：录制很简单，就像录屏一样，只是录制的不是视频，而是代码！** 🎬

